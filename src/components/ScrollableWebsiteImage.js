import React, { useState, useEffect, useRef } from "react";

import { useTranslation } from "react-i18next";

const ScrollableWebsiteImage = () => {
  const [pcImageLoaded, setPcImageLoaded] = useState(false);
  const [mobileImageLoaded, setMobileImageLoaded] = useState(false);

  const scrollablePCImageRef = useRef();
  const scrollableMobileImageRef = useRef();

  const { t } = useTranslation();

  const handlePCImageLoad = () => {
    setPcImageLoaded(true);
  };

  const handleMobileImageLoad = () => {
    setMobileImageLoaded(true);
  };

  useEffect(() => {
    const imgElement = scrollablePCImageRef.current;
    if (!imgElement) return;

    const observer = new IntersectionObserver(
      (entries, observer) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            handlePCImageLoad();
            observer.disconnect(); // Stop observing once the image is in view
          }
        });
      },
      { threshold: 0.1 } // Adjust threshold as needed
    );

    observer.observe(imgElement);

    return () => {
      observer.disconnect();
    };
  }, []);

  useEffect(() => {
    const imgElement = scrollableMobileImageRef.current;
    if (!imgElement) return;
    const observer = new IntersectionObserver(
      (entries, observer) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            handleMobileImageLoad();
            observer.disconnect(); // Stop observing once the image is in view
          }
        });
      },
      { threshold: 0.05 } // Adjust threshold as needed
    );

    observer.observe(imgElement);

    return () => {
      observer.disconnect();
    };
  }, []);

  return (
    <div className="ComputerAndMobileWebsiteImage-Container">
      <svg
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        width="494"
        height="324"
        viewBox="0 0 494 324"
        className="ComputerScreenShape"
      >
        <a href="https://wanderz.000webhostapp.com/" target="_blank">
          <foreignObject
            className="ComputerWebsiteImage"
            width="100%"
            height="280"
          >
            <div
              xmlns="http://www.w3.org/1999/xhtml"
              style={{ height: "100%" }}
            >
              <div className="Computer-Scrollable-Image-Container">
                <h2 className="ScrollablePCImage-Hint">
                  {pcImageLoaded ? t("hover") : t("loading") + "..."}
                </h2>
                <img
                  ref={scrollablePCImageRef}
                  className={`ScrollablePCImage ${
                    pcImageLoaded ? "active" : ""
                  }`}
                  loading="lazy"
                  src={
                    pcImageLoaded
                      ? "/images/wanderzPC.webp"
                      : "/images/placeholder.PNG"
                  }
                  alt="Scrollable Image For Computer Screen"
                />
              </div>
            </div>
          </foreignObject>
        </a>
        <path
          d="M0 0 C163.02 0 326.04 0 494 0 C494 95.04 494 190.08 494 288 C330.98 288 167.96 288 0 288 C0 192.96 0 97.92 0 0 Z M9 8 C9 97.43 9 186.86 9 279 C166.08 279 323.16 279 485 279 C485 189.57 485 100.14 485 8 C327.92 8 170.84 8 9 8 Z "
          fill="#000000"
          transform="translate(0,0)"
        />
      </svg>
      <svg
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        width="234"
        height="394"
        viewBox="0 0 234 394"
        className="MobileScreenShape"
      >
        <a href="https://wanderz.000webhostapp.com/" target="_blank">
          <foreignObject className="MobileWebsiteImage">
            <div
              xmlns="http://www.w3.org/1999/xhtml"
              style={{ height: "100%" }}
            >
              <div className="Mobile-Scrollable-Image-Container">
                <h2 className="ScrollableMobileImage-Hint">
                  {mobileImageLoaded ? t("hover") : t("loading") + "..."}
                </h2>
                <img
                  ref={scrollableMobileImageRef}
                  className={`ScrollableMobileImage ${
                    mobileImageLoaded ? "active" : ""
                  }`}
                  loading="lazy"
                  src="/images/wanderzMobile.webp"
                  alt="Scrollable Image For Mobile Screen"
                />
              </div>
            </div>
          </foreignObject>
        </a>
        <path
          d="M0 0 C1.71907493 -0.0057094 3.43814608 -0.01267585 5.1572113 -0.02079773 C9.80601693 -0.03868094 14.4546333 -0.03756993 19.10346293 -0.03185534 C22.99252436 -0.02875661 26.8815498 -0.03486352 30.7706061 -0.04089409 C39.94898944 -0.0549217 49.12727967 -0.0533926 58.30566406 -0.04199219 C67.75733143 -0.03051137 77.20871503 -0.04459008 86.66034502 -0.07138866 C94.79227055 -0.09357751 102.92410721 -0.1001759 111.05606085 -0.09431225 C115.90544882 -0.09094926 120.7546549 -0.09331401 125.60401726 -0.11056328 C130.16536408 -0.1260813 134.72629189 -0.12202324 139.28762245 -0.10325813 C140.95565081 -0.09958573 142.62371056 -0.10264116 144.2917099 -0.11314392 C157.00552713 -0.18704888 167.34769659 1.41057279 176.98071289 10.40405273 C186.09697058 20.10609405 187.42980254 29.15411276 187.36839294 42.1749115 C187.3725712 43.56148937 187.37805141 44.94806382 187.38471276 46.33463198 C187.39912158 50.12598929 187.39493704 53.91712838 187.38754594 57.70849741 C187.38280525 61.80470384 187.39533204 65.90086368 187.40556335 69.99705505 C187.42273876 78.01433885 187.42359402 86.03154423 187.41835045 94.04884165 C187.41430536 100.56647484 187.41575634 107.0840849 187.42109871 113.601717 C187.42184713 114.53013173 187.42259555 115.45854647 187.42336665 116.41509499 C187.42489816 118.30129588 187.42643651 120.18749676 187.42798162 122.07369763 C187.44170198 139.75247916 187.43627212 157.43121641 187.42479641 175.10999692 C187.41486339 191.27549579 187.42780672 207.44088022 187.4517306 223.60636144 C187.4761256 240.21562883 187.48572855 256.82484292 187.47907788 273.43412787 C187.47558669 282.75478892 187.47781113 292.07536195 187.4953289 301.39600945 C187.51005583 309.32995981 187.51067985 317.26376015 187.49325799 325.19770759 C187.48474986 329.24356032 187.48259376 333.28914512 187.49790955 337.33498383 C187.51177227 341.04295395 187.50697363 344.750427 187.48767031 348.45836849 C187.48214382 350.42593061 187.49616857 352.39351815 187.51102442 354.36103195 C187.41971445 365.38397032 184.58679176 374.25709715 176.98071289 382.40405273 C166.38815442 392.3570605 155.75235015 392.84952222 141.96142578 392.80810547 C140.24235085 392.81381486 138.5232797 392.82078132 136.80421448 392.8289032 C132.15540885 392.84678641 127.50679248 392.8456754 122.85796285 392.83996081 C118.96890142 392.83686208 115.07987598 392.84296899 111.19081968 392.84899956 C102.01243634 392.86302717 92.83414611 392.86149807 83.65576172 392.85009766 C74.20409435 392.83861684 64.75271075 392.85269555 55.30108076 392.87949413 C47.16915523 392.90168298 39.03731857 392.90828137 30.90536493 392.90241772 C26.05597696 392.89905473 21.20677088 392.90141948 16.35740852 392.91866875 C11.7960617 392.93418677 7.23513389 392.93012871 2.67380333 392.9113636 C1.00577497 392.9076912 -0.66228478 392.91074663 -2.33028412 392.92124939 C-15.04410135 392.99515435 -25.38627081 391.39753268 -35.01928711 382.40405273 C-44.1355448 372.70201142 -45.46837676 363.65399271 -45.40696716 350.63319397 C-45.41114542 349.2466161 -45.41662563 347.86004165 -45.42328697 346.47347349 C-45.4376958 342.68211618 -45.43351125 338.89097709 -45.42612016 335.09960806 C-45.42137947 331.00340163 -45.43390626 326.90724179 -45.44413757 322.81105042 C-45.46131298 314.79376662 -45.46216824 306.77656124 -45.45692467 298.75926382 C-45.45287958 292.24163063 -45.45433056 285.72402057 -45.45967293 279.20638847 C-45.46042135 278.27797374 -45.46116977 277.349559 -45.46194087 276.39301048 C-45.46347238 274.50680959 -45.46501073 272.62060871 -45.46655584 270.73440783 C-45.4802762 253.05562631 -45.47484634 235.37688906 -45.46337063 217.69810855 C-45.45343761 201.53260967 -45.46638094 185.36722525 -45.49030482 169.20174403 C-45.51469982 152.59247664 -45.52430277 135.98326255 -45.51765209 119.3739776 C-45.51416091 110.05331655 -45.51638535 100.73274351 -45.53390312 91.41209602 C-45.54863005 83.47814566 -45.54925407 75.54434532 -45.53183221 67.61039788 C-45.52332408 63.56454515 -45.52116798 59.51896035 -45.53648376 55.47312164 C-45.55034649 51.76515151 -45.54554785 48.05767847 -45.52624453 44.34973698 C-45.52071804 42.38217486 -45.53474279 40.41458732 -45.54959863 38.44707352 C-45.45828867 27.42413515 -42.62536597 18.55100832 -35.01928711 10.40405273 C-24.42672864 0.45104497 -13.79092437 -0.04141675 0 0 Z M-30.33178711 18.77905273 C-37.65521404 27.97313763 -37.16718095 38.17433176 -37.15299988 49.32698059 C-37.15526543 50.63264266 -37.15753099 51.93830473 -37.1598652 53.28353232 C-37.16596815 56.89692073 -37.16585138 60.51028595 -37.16467083 64.12367833 C-37.16446644 68.02494545 -37.16998919 71.9262052 -37.17472839 75.82746887 C-37.18302717 83.46667522 -37.18578288 91.10587385 -37.18634077 98.74508432 C-37.18681628 104.9557408 -37.18887278 111.16639473 -37.1920414 117.3770504 C-37.20084573 134.99304711 -37.2054611 152.60903773 -37.20471092 170.22503666 C-37.20467097 171.17429019 -37.20463101 172.12354371 -37.20458984 173.1015625 C-37.20454896 174.05197761 -37.20450808 175.00239272 -37.20446596 175.98160829 C-37.20405952 191.38415067 -37.21362926 206.78666859 -37.22772821 222.1892039 C-37.24209727 238.01190917 -37.24899811 253.83460252 -37.24813443 269.65731448 C-37.24780266 278.53755805 -37.25054137 287.417776 -37.26131248 296.29801369 C-37.27042443 303.85867535 -37.27258701 311.41929975 -37.26580306 318.97996453 C-37.26254142 322.83536042 -37.26246832 326.69068485 -37.27115631 330.54607391 C-37.28048931 334.73082782 -37.27423604 338.91541677 -37.26652527 343.10017395 C-37.27166883 344.31137415 -37.27681239 345.52257435 -37.28211182 346.77047759 C-37.23653103 357.97320643 -36.38083947 367.70848091 -28.38256836 376.12670898 C-20.71625028 383.13837519 -12.30629501 384.52312823 -2.170578 384.5377655 C-1.51828431 384.54003106 -0.86599062 384.54229662 -0.19393045 384.54463083 C1.97213125 384.55091528 4.13812947 384.55014507 6.30419922 384.54931641 C7.865342 384.55231137 9.42648404 384.55571468 10.98762512 384.55949402 C15.21502393 384.56830392 19.44240248 384.57067087 23.66980958 384.5713098 C26.31473833 384.57202202 28.95966198 384.57415959 31.60458946 384.57680702 C40.84267884 384.58605052 50.08075381 384.59014316 59.31884766 384.58935547 C67.91265626 384.58875496 76.50640204 384.59930409 85.10019475 384.61509913 C92.49321531 384.62820011 99.88621539 384.63353829 107.27924746 384.63290006 C111.68819464 384.63264582 116.09708595 384.63545587 120.5060215 384.64607811 C124.6552022 384.65580222 128.80427411 384.65580887 132.95345879 384.64856148 C134.46990748 384.64752098 135.98636311 384.64984651 137.50279999 384.65592194 C149.89526733 384.70232648 161.26449278 384.7353367 170.70336914 375.76733398 C179.39010899 366.26954717 179.12986616 355.62425156 179.11442566 343.48112488 C179.11669122 342.17546281 179.11895677 340.86980074 179.12129098 339.52457315 C179.12739393 335.91118474 179.12727716 332.29781952 179.12609661 328.68442714 C179.12589222 324.78316002 179.13141497 320.88190027 179.13615417 316.9806366 C179.14445295 309.34143025 179.14720866 301.70223162 179.14776655 294.06302115 C179.14824206 287.85236467 179.15029856 281.64171074 179.15346718 275.43105507 C179.16227151 257.81505836 179.16688688 240.19906774 179.1661367 222.58306881 C179.16609675 221.63381528 179.16605679 220.68456175 179.16601562 219.70654297 C179.1659543 218.2809203 179.1659543 218.2809203 179.16589174 216.82649717 C179.1654853 201.4239548 179.17505504 186.02143688 179.18915399 170.61890157 C179.20352305 154.7961963 179.21042389 138.97350295 179.20956022 123.15079099 C179.20922844 114.27054741 179.21196715 105.39032947 179.22273827 96.51009178 C179.23185021 88.94943012 179.23401279 81.38880572 179.22722884 73.82814094 C179.2239672 69.97274505 179.2238941 66.11742062 179.23258209 62.26203156 C179.24191509 58.07727765 179.23566182 53.8926887 179.22795105 49.70793152 C179.23566639 47.89113122 179.23566639 47.89113122 179.2435376 46.03762788 C179.19795682 34.83489904 178.34226526 25.09962456 170.34399414 16.68139648 C162.67767606 9.66973028 154.26772079 8.28497724 144.13200378 8.27033997 C143.47971009 8.26807441 142.8274164 8.26580885 142.15535623 8.26347464 C139.98929454 8.25719019 137.82329631 8.2579604 135.65722656 8.25878906 C134.09608378 8.2557941 132.53494174 8.25239079 130.97380066 8.24861145 C126.74640185 8.23980154 122.5190233 8.2374346 118.2916162 8.23679566 C115.64668745 8.23608345 113.0017638 8.23394588 110.35683632 8.23129845 C101.11874694 8.22205495 91.88067197 8.21796231 82.64257812 8.21875 C74.04876952 8.21935051 65.45502374 8.20880138 56.86123103 8.19300634 C49.46821047 8.17990536 42.07521039 8.17456718 34.68217832 8.17520541 C30.27323114 8.17545965 25.86433983 8.1726496 21.45540428 8.16202736 C17.30622358 8.15230325 13.15715167 8.1522966 9.007967 8.15954399 C7.4915183 8.16058449 5.97506268 8.15825896 4.45862579 8.15218353 C-8.96050156 8.10193458 -20.7643622 8.31835474 -30.33178711 18.77905273 Z "
          fill="#000000"
          transform="translate(46,0)"
        />
        <path
          d="M0 0 C21.12 0 42.24 0 64 0 C64 2.64 64 5.28 64 8 C42.88 8 21.76 8 0 8 C0 5.36 0 2.72 0 0 Z "
          fill="#000000"
          transform="translate(86,30)"
        />
        <path
          d="M0 0 C10.56 0 21.12 0 32 0 C32 2.64 32 5.28 32 8 C21.44 8 10.88 8 0 8 C0 5.36 0 2.72 0 0 Z "
          fill="#000000"
          transform="translate(102,356)"
        />
      </svg>
    </div>
  );
};

export default ScrollableWebsiteImage;
